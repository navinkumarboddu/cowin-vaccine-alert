<div class="container" *ngIf="loadContent">

    <div class="py-5 text-center">
        <h2>Preferences</h2>
        <p class="lead">You can set age, vaccine and alert preferences. Please Click Save to save your preferences.</p>
    </div>

    <form role="form" #MySelectForm="ngForm">
    <div class="row">
        <div class="col-md-8 order-md-1">
            <div class="row">
                <div class="col-md-12 mb-3">
                        <!--<div class="form-group">
                            <h4 class="mb-3">Age Criteria</h4>
                            <fieldset class="form-group"> 
                                <ng-select 
                                [items]="categories"
                                bindLabel="name"
                                placeholder="Select Category"
                                appendTo="body"
                                [multiple]="true"
                                [(ngModel)]="selected"
                                name="licenseAuthorityId"  
                                required 
                                [disabled]="isFormDisabled"
                                [hideSelected]="true"
                                [addTag]="addCustomUser">
                                </ng-select>
                            </fieldset>
                        </div>
                        <hr class="mb-4">-->
                        <div class="form-group">
                            <h4 class="mb-3">Age Criteria</h4>
                            <fieldset class="form-group"> 
                                <ng-select 
                                [items]="dropDownAges"
                                bindLabel="age"
                                placeholder="Select Age"
                                appendTo="body"
                                [multiple]="true"
                                [(ngModel)]="selectedAges"
                                name="ages"  
                                required 
                                [disabled]="isFormDisabled"
                                [hideSelected]="true"
                                [addTag]="addAgeOption">
                                </ng-select>
                            </fieldset>
                        </div>
                        <hr class="mb-4">
                        <div class="form-group">
                            <h4 class="mb-3">Vaccine Criteria</h4>
                            <fieldset class="form-group"> 
                                <ng-select 
                                [items]="dropDownVaccines"
                                bindLabel="vaccinename"
                                placeholder="Select Vaccine"
                                appendTo="body"
                                [multiple]="true"
                                [(ngModel)]="selectedVaccines"
                                name="vaccines"  
                                required 
                                [disabled]="isFormDisabled"
                                [hideSelected]="true"
                                [addTag]="addVaccineOption">
                                </ng-select>
                            </fieldset>
                        </div>
                        <hr class="mb-4">
                        <div class="form-group">
                          <h4 class="mb-3">Dose Criteria</h4>
                          <fieldset class="form-group"> 
                              <ng-select 
                              [items]="dropDownDoses"
                              bindLabel="dose"
                              placeholder="Select Dose"
                              appendTo="body"
                              [multiple]="true"
                              [(ngModel)]="selectedDoses"
                              name="doses"  
                              required 
                              [disabled]="isFormDisabled"
                              [hideSelected]="true">
                              </ng-select>
                          </fieldset>
                      </div>
                </div>
            </div>
        </div>
        <div class="col-md-4 order-md-2 mb-4">
            <h4 class="d-flex justify-content-between align-items-center mb-3">
              <span class="text-muted">Your Preferences</span>
              <span class="badge badge-secondary badge-pill">3</span>
            </h4>
            <ul class="list-group mb-3">
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Age</h6>
                  <small class="text-muted" *ngFor="let select of selectedAges; let isLast=last"> {{select.age}}{{isLast ? '' : ', '}} </small>
                </div>
              </li>
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Vaccine</h6>
                  <small class="text-muted" *ngFor="let select of selectedVaccines; let isLast=last"> {{select.vaccinename}}{{isLast ? '' : ', '}} </small>
                </div>
              </li>
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Dose</h6>
                  <small class="text-muted" *ngFor="let select of selectedDoses; let isLast=last"> {{select.dose}}{{isLast ? '' : ', '}} </small>
                </div>
              </li>
            </ul>
              <div class="input-group">
                <div class="input-group-append">
                  <fieldset class="form-group">
                    <button class="btn btn-primary" (click)="savePref()" [disabled]="MySelectForm.invalid">Save</button>
                  </fieldset>
                </div>
              </div>
          </div>
    </div>
  </form>
</div>